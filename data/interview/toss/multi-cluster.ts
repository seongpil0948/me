import type { InterviewQuestion } from "@/types/portfolio";

/**
 * 멀티 클러스터 운영 관련 질문 (ID 116)
 * - 계열사별 클러스터 전략
 * - 표준화와 자율성 균형
 */
export const tossMultiClusterQuestions: InterviewQuestion[] = [
  {
    id: 116,
    category1: "Infrastructure",
    category2: "Multi-Cluster",
    question:
      "토스처럼 여러 계열사와 도메인별로 쿠버네티스 클러스터를 운영할 때 어떤 전략이 필요한가요?",
    answer:
      "멀티 클러스터 운영에서 가장 어려운 것은 '표준화와 자율성의 균형'입니다.\n\n" +
      "토스뱅크는 금융 규제 때문에 엄격한 보안이 필요하고, 토스증권은 빠른 배포가 중요하죠. " +
      "모든 계열사에 똑같은 규칙을 강제하면 비즈니스 속도가 느려지고, 완전히 자율로 두면 나중에 통합이 불가능해집니다.\n\n" +
      "TheShop에서 멀티 환경 운영 경험이 있어요. AWS Multi-AZ 설계로 Primary/Secondary/Standby를 구성했고, " +
      "Airflow 5개 클러스터를 HA로 운영했습니다. 각 클러스터마다 독립적인 메타데이터와 워커가 있었지만, " +
      "중앙화된 모니터링과 로그 수집으로 통합 관리가 가능했죠.\n\n" +
      "토스 환경에서 제가 제안하고 싶은 전략은 세 가지입니다.\n\n" +
      "첫째, GitOps 기반 통합 배포입니다. ArgoCD Multi-Cluster로 모든 클러스터 배포를 관리하되, " +
      "각 계열사가 자신의 디렉토리에서 커스터마이징할 수 있게 하는 거죠. " +
      "공통 인프라는 toss-infrastructure로 표준화하고, 계열사별 설정은 자율적으로 하는 구조입니다.\n\n" +
      "둘째, 네트워크 분리와 선택적 연결이에요. NetworkPolicy로 기본적으로는 계열사 간 트래픽을 차단하되, " +
      "명시적으로 허용된 API만 접근 가능하게 하는 거죠. " +
      "예를 들어 토스뱅크는 토스 코어 API만 접근할 수 있고, 다른 계열사 서비스에는 직접 접근할 수 없게요.\n\n" +
      "셋째, 통합 Observability입니다. Prometheus Federation으로 모든 클러스터 메트릭을 중앙화하고, " +
      "Trace 상관 분석으로 cross-cluster 장애를 추적할 수 있어야 합니다. " +
      "한 계열사 문제가 다른 계열사에 영향을 주는지 빠르게 파악할 수 있어야 하니까요.\n\n" +
      "핵심은, 기술 표준은 강하게 유지하되, 비즈니스 요구사항에는 유연하게 대응하는 것입니다. " +
      "K8s, Istio, Prometheus 같은 공통 스택은 표준화하고, 그 위에서 계열사가 자율적으로 움직일 수 있게 하는 거죠.\n\n" +
      "토스 DevOps 위클리에서 각 계열사의 경험을 공유하면, 비슷한 문제를 겪는 팀이 빠르게 해결할 수 있을 것 같아요.",
  },
];
