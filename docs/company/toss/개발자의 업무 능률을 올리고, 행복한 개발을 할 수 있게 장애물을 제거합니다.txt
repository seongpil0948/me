

서비스 개발자가 비즈니스에만 집중할 수 있도록 도와주는 팀이 있다면 어떤 모습일까요?

토스에는 서비스 개발자가 빠르게 업무를 빠르고 편하게 업무를 진행할 수 있도록 배포 과정을 혁신하고, 개발 경험에서 피로를 주는 비효율적인 퍼널을 제거하는 팀이 있습니다. 바로 토스의 DevOps팀인데요.

더 자세히 소개해드리기 위해, DevOps Engineer로 근무하고 계신 이재성 님, 한경수 님, 성준영 님 세분을 보시고 이야기를 나눠 보았어요. 


Q. 안녕하세요. 간단한 자기소개와 더불어 하고 계신 일에 대해 설명 부탁드려요.
재성: 안녕하세요! 저는 여러 기술과 툴을 적용해서 개발자분들이 서비스를 손쉽게 배포할 수 있도록 일하는 경험을 개선하는 일들을 하고 있어요.


토스에는 많은 사일로와 팀들이 있는데요. 아무래도 금융 도메인이다 보니, 여러 규제를 적용받아 개발하기 때문에 개발 경험과 운영 경험이 낙후될 수 있는 부분을 개선하고 있습니다.

토스에 합류하기 전에도 DevOps로 컨테이너 오케스트레이션이나 클라우드 인프라를 구축하고 장애 대응하는 일을 하고 있어서 업무 영역이 꽤 겹쳤었어요. 이직을 고려하던 중에 지인을 통해 토스를 알게 되어 인터뷰를 봤는데요. 인터뷰보다는 기술적 토론에 가까웠었는데, 인터뷰어분들의 전문성에 반해 토스에 합류하게 되었습니다.


경수: 토스의 다양한 서비스를 개발하기 위해, 많은 개발자분들이 힘써주시고 있는데요. 그 과정에서 장애물이 되는 것들을 제거하고 있어요. 쉬운 배포 환경을 전달해드리고, 빠른 장애 파악 및 롤백 그리고 다양한 테스트가 가능한 인프라를 구성하고 있어요.

저는 DevOps 업무를 토스에 합류해서 처음 시작했어요. 3년 이하의 개발자를 채용하는 NEXT 전형을 기회로 합류하게 되었는데요. 인터뷰 과정에서 토스에서 많은 경험을 통해 발전할 수 있겠다는 확신이 들었어요. 


준영: 토스의 모든 서비스는 쿠버네티스 위에 올라가게 되는데요. 해당 구성과 및 운영을 DevOps가 메인으로 맡고 있어요.

새로운 인프라 구성이 필요한 경우 DevOps가 장비를 받아서 쿠버네티스를 설치하고 필수적인 컴포넌트와 파이프라인을 구성하고 있습니다.

이전에는 플랫폼 엔지니어, 서비스 개발자로 커리어를 쌓아가다가 배포 및 모니터링, 인프라 고도화를 통해 다방면으로 활약할 수 있는 DevOps 직무에 고민하고 있던 중, 토스 개발자 컨퍼런스 SLASH에서 재성님의 ‘토스의 서버 인프라 모니터링' 발표를 보게 되었어요.

서비스 안정성을 위한 고민들와 그에 따른 고도화 과정들을 보며, ‘이런 팀에서 함께 일하고 싶다’라는 생각에 합류하게 되었습니다. 저희 팀 모두 탁월한 전문성을 바탕으로 훨씬 깊고 넓은 범위에서 고민하며 일하고 있다고 생각해요.

Q. 최근 어떤 업무에 집중하고 계신가요.
재성: 꾸준하게 트래픽이 증가하다 보니 그에 비례하게 리소스 사용률이 높아지는데, 해당 리소스를 효율적으로 쓸 수 있도록 개선해보고 있어요.

예를 들어 마이크로서비스를 구성하다 보면 유저정보를 조회해 보거나 여러 서비스의 정보를 모아서 확인하는 로직들이 존재하는데, 구성이 복잡해지다보면 중복으로 호출하는 경우가 발생합니다. 이런 호출들을 제거하면 리소스를 더 효율적으로 사용할 수 있습니다.

위와 같은 문제들을 해결할 수 있도록 탐지 자동화를 통해 지속적으로 개선하고, 각 리소스마다 CPU 및 메모리, 네트워크 자원에 대한 성능개선을 꾸준히 할 수 있는 제품들을 고민해 보고 있습니다.

경수: 모든 토스 커뮤니티에 DevOps 엔지니어가 있는 게 아니다 보니, 저희가 서포트해야 하는 경우가 많아요. 그러다 보니 운영해야 하는 쿠버네티스 클러스터가 계속 늘어나서 더 편하게 관리할 방법에 대한 고민이 많습니다.

각각의 클러스터마다 성격이 달라서 운영 방법의 차이점을 줄이기 위해 많은 노력을 하고 있어요.

준영: DevOps팀 자동화와 개발자분들의 서비스 관리를 위한 플랫폼 백엔드를 장기적으로 좀 더 유연하고 확장성 있게 가져가기 위한 업무를 진행하고 있어요.

CI/CD 인프라와의 결합도를 낮추고 공통된 스펙을 갖추기 위한 서비스 배포 파이프라인을 추상화하고 마이그레이션 작업을 하기도 합니다. 이외에도 어드민 시스템을 플랫폼 엔지니어 모두가 쉽게 컨트리뷰션 할 수 있도록 좋은 구조를 위한 스터디도 진행하고 있어요.

Q. 지금까지 진행했던 프로젝트 중 가장 기억에 남는 것이 있나요?

재성: 토스에서 처음 DC/OS에서 쿠버네티스로 마이그레이션 할 때가 가장 기억에 남아요.

당시에 저도 그렇게 전문성이 많지 않았고, 팀원분들도 k8s에 대해 자세하게 알지는 못했지만 어떻게 하면 인프라 퀄리티를 올릴 수 있는지 고민을 많이 했었는데요.

그 과정에서 팀원들의 탁월한 러닝커브가 도움이 되었어요. 제가 담당했던  k8s나 istio를 더 잘 이해하고 아웃풋을 내는 모습에서 많은 자극을 얻었고, 엔지니어로써 기술과 베스트 프랙티스(Best practice)에 집착하던 편견들을 버릴 수 있었던 프로젝트였습니다.

* DC/OS : the Distributed Cloud Operating System의 줄임말로 여러 개의 서버가 함께 운영되는 환경을 하나의 서버처럼 손쉽게 운영하고 관리하기 위한 목적으로 활용되는 솔루션


경수: 토스의 인프라 구조에서는 istio에서 가이드 하는 방식으로는 사용할 수 없어서 envoy를 빌드 했던 점이 기억에 남아요.

istio 메트릭 & 로그를 telemetry를 사용해서 수집하고 있는데 istio 1.7 이후에는 해당 컴포넌트를 더 이상 사용할 수 없게 변경이 되었는데요.

많은 시행착오가 있었지만 결국 envoy 를 고쳐 쓰지 않고 새로운 컴포넌트를 만들어서 사용하기로 했습니다. 더 빠른 판단으로 새로운 컴포넌트를 만들었으면 좋았을 것 같다는 후회도 있지만, 다양한 접근 방법을 함께 고민할 수 있도록 도와준 팀원분들께 고마운 마음이 있어요.


준영: 매트릭 수집 시스템의 리소스 감소와 성능 향상을 위해 VictoriaMetrics를 검토해 봤던 경험이 가장 기억에 남아요.

당시 운영 환경 매트릭에서의 부하 정도를 측정해 보기 위해 일부 설정들을 배포했는데요. 자동화된 알람/조치 시스템과 VictoriaMetrics의 버그가 겹치면서 노드가 한 번에 다운되는 장애를 겪었어요.

다행히 이중화된 데이터센터와 경수님의 빠른 대처 덕분에 큰 장애는 막을 수 있었어요. 입사한 지 6개월이 안된 시점이었는데, 빠른 대응 프로세스와 고도화된 시스템에 놀랐던 기억이 있어요.

성능과 리소스 사용량 감소에는 큰 이점이 있었지만 토스의 인프라 환경에는 적합하지 않다고 판단해 드랍되어 아쉬운 부분도 있었는데요. 논리가 충분하고 설득이 가능하다면 영향도가 굉장히 큰 작업들도 시도해 볼 수 있었다는 점에서 토스의 문화를 제대로 느껴봤던 기억에 남는 프로젝트였던 것 같습니다.


Q. 쿠버네티스를 도입한 지도 3년이 되어간다고 알고 있는데요. 어떤 변화가 있었나요?
재성: 쿠버네티스 덕분에 인프라 구성들을 통합하기도 쉽고, 변경하기도 쉬워서 비교적 적은 인원으로 다양한 사업들을 해낼 수 있는 점이 크게 변화되었다고 생각해요.

서비스 장애를 자동으로 대응하게 하거나 모니터링 시스템을 고도화하는 것도 용이했는데요. 차트로 코드형태가 관리되기 때문에 새롭게 구축하는 것도 굉장히 빠르게 가져갈 수 있었어요.

퀄리티와 효율성 모두 챙길 수 있어 쿠버네티스는 토스의 서비스 인프라 표준이나 다름없어요. 요즘은 신규 사업이나 법인이 만들어지면 쿠버네티스부터 구성하고 있어요.

쿠버네티스나 커널 업데이트처럼 개선이나 버그픽스 같은 사항들도 꾸준히 팔로업하고 있는데, Active-Active 데이터 센터로 운영되고 있기 때문에 편리하게 진행할 수 있었습니다.

Q. 토스에서 DevOps 엔지니어로 일하는 것이 특별한 이유는 무엇일까요?

재성: 인프라 및 보안, 운영, 어플리케이션 영역들을 전반적으로 다루고 있어 조금 어렵다고 느낄 때도 있지만 여러 경험을 통해 원하는 부분에 대해 깊은 역량을 쌓을 수 있는 점이 좋아요.

서비스 개발자와 SRE 분들의 생산성뿐만 아니라, 보안팀과 협업 등 전반적으로 대부분의 엔지니어 및 개발자분들의 업무 경험을 개선하다 보니 다양한 팀원들이 ‘나의 제품의 고객’이라는 생각을 가지고 업무에 임하고 있어요.

토스앱 자체가 원앱으로 되어 있어 계열사와 협업할 일이 수시로 일어나고 있는데요. 토스코어에서 전반적으로 잘 되어 있는 것들을 계열사가 공급받기도 하고 계열사가 얻었던 인사이트를 코어에서 배워가기도 합니다. 다 같이 토스커뮤니티라는 거대한 서비스를 운영하기 위해 원팀처럼 일하고 있어요.


경수: 기술적인 교류가 활발하다는 점이 인상 깊어요. 토스커뮤니티의 DevOps 엔지니어 모두가 모여서 정보를 공유하는 위클리를 진행하고 있는데요.

같은 직군 간 커뮤니케이션이 원활하다 보니, 서로 의견을 내는 데에 열려있어요. 위클리에서는 내가 경험하지 못한 부분들을 듣기도 하고 다른 DevOps 엔지니어들과 공유해서 같은 실수를 하지 않도록 도와주시는 게 많은 도움이 되었어요.


준영: 대규모의 트래픽 환경에서도 빠르고 안정적인 인프라를 구성해 볼 수 있는 점이 특별하다고 생각해요.

토스는 플랫폼과 비즈니스의 경계가 굉장히 뚜렷하다고 느꼈는데 그만큼 통일성 있는 인프라를 운영하고 있기 때문에 변경에 대한 허들이 낮은 편입니다.

이런 변경에 대한 영향도를 최소화하기 위한 클러스터 이중화, 트래픽 전환 등의 환경이 구성되어 있어 언제든 안전하고 빠르게 시도할 수 있는 환경이 갖춰져 있어요.


Q. ‘팀원이 제품의 고객’이라는 재성님의 이야기가 인상 깊은데요. 조금 더 자세히 공유 주실 수 있을까요?

재성: 저희는 SRE(Site Reliability Engineer) 분들과 협업 지점이 많은데요. SRE분들이 하드웨어, 소프트웨어 영역에 걸쳐, 서비스 장애에 대한 전문성이 탁월하시고 장애대응이나 성능개선의 선구자 역할을 해주고 계세요. 하지만 이런 탁월한 SRE분들은 아주 귀하기 때문에 채용된 분들이 많지 않아요.

모든 서비스를 개선하기에는 물리적으로 불가능해서 SRE분들이 찾은 문제들을 빠르게 탐지하고, 같은 문제를 개선하는데 시간을 아낄 수 있도록 자동화된 제품들을 만듭니다.

추가로 성능분석 같은 경우는 서비스 개발자분들이 직접 자신의 서비스를 해결해 볼 수 있도록 GUI 제품들을 제공해서, 모든 서비스들이 점진적으로 개선될 수 있도록 하고 있어요. 이런 제품들은 서비스 개발자분들이 다양한 경험을 해볼 수도 있고, SRE의 시간도 아끼면서 시스템 개선도 되니까 서로에게 윈윈(win-win)인거 같아요.

협업 지점이 많은 SRE 현수님께서 더 자세하게 이야기해 주실 수 있을 것 같아요!


현수: 안녕하세요. 토스 서비스가 안정적으로 운영될 수 있도록 서비스 모니터링 및 성능 개선, 장애 대응 등의 역할을 하고 있는 SRE 김현수입니다.

재성님께서 앞서 말씀 주신 것처럼 특히 플랫폼 운영, 모니터링 및 트러블 슈팅 등 다양한 영역에서 DevOps분들과 밀접하게 업무를 함께하고 있어요.

k8s, CI/CD 툴, 모니터링 시스템 등 서비스 운영에 필요한 환경 구성 및 운영을 DevOps분들이 잘해주고 있다 보니 성능테스트 및 플랫폼 인프라의 신규버전 검증, 장애대응 등 SRE 업무를 하는 데 있어 많은 도움을 받고 있습니다.

간단하게는 인프라 구성에 관련된 내용을 확인하거나 운영 중인 플랫폼에 대한 질문 및 조언을 얻을 때도 있어요. 재성님, 경수님, 준영님과 같이 숙련된 분들은 서비스 이슈 분석 및 개선, 장애대응 등의 SRE 역할도 같이 해주고 계셔서 업무에 대한 부담도 많이 줄었어요.

이외에도 threads dump, profiling 등 서비스 분석을 위한 툴도 DevOps분들이 직접 개발하고요. 배포 시 분석 자동화를 위한 환경도 잘 구성해 주셔서 장애 예방 및 문제가 발생했을 때 원인을 찾는데도 많은 도움을 받고 있습니다.

Q. 가장 보람을 느꼈던 순간은 언제였나요?
재성: 아무래도 금융 컴플라이언스를 적용받고 있어, 보안의 영역을 다룰 때 꽤 어렵기도 하고 제 손으로 업무의 생산성과 보안성을 적절하게 유지하는 것에 대한 고민이 많았어요.

더 좋은 임팩트를 내고 싶어서 전자금융감독 규정 스터디를 진행했던 적이 있는데, 이때 얻은 지식과 용기로 업무의 생산성도 높이고 보안성도 해치지 않는 목적으로 SSO나 여러 시스템들을 개선했습니다. 


경수: 제가 구성한 인프라를 개발자 분들이 편하게 사용하고 있는 모습을 볼 때 가장 보람을 느껴요.

손쉬운 금융 서비스를 개발하기 위해 많은 개발자 분들이 힘써주시고 있어, 저희도 그에 맞춰 빠른 장애 파악 및 다양한 테스트가 가능한 인프라를 구성하고 있는데요.

DevOps 엔지니어는 개발자가 비즈니스 로직에만 전념할 수 있도록 도와주는 역할이라고 생각하는데, 개발자 분이 “이 기능 정말 좋아요!”같은 말을 해주실 때 뿌듯합니다.


준영: 아무래도 서비스 개발자 분들이 체감할 수 있는 변화를 만들어 내고, 좋아해 주실 때 가장 큰 보람을 느끼는 것 같아요.

Github Hook 을 이용해 사내 시스템의 UI 를 통해 배포 파이프라인의 일부 과정을 좀 더 자동화된 형태로 만들었던 적이 있었는데, 간단한 개선임에도 많은 분들이 이용해 주시고 기능을 공유해 주셔서 좋았던 기억이 있어요. 가끔은 더 좋은 업무경험을 만들어 드리기 위해서 잠깐 파이프라인이나 사내 플랫폼 이용이 중단될 때도 있는데, 잘 이해해 주셔서 더 빨리 개선 해드리고 싶은 마음이 듭니다.

Q. 자랑하고 싶은 DevOps팀만의 문화가 있다면 소개해주세요.
재성: 모든 계열사가 같은 인프라 아키텍처와 컨셉을 공유하고 있어서 토스 커뮤니티의 DevOps 엔지니어 분들이 서로 시너지를 내기가 쉬워요.

최근에는 AWS 비용 리뷰 미팅을 진행하는데, 증권 DevOps로 계신 명규님이 좋은 아이디어나 자동화들을 제공해주셔서 기존 보다 효율화할 수 있었고, DevOps팀 위클리에서는 각자 배웠던 러닝커브들을 공유하면서 같은 문제를 동일하게 겪지 않도록 서로 배워가고 있습니다.

경수: SRE팀과 서버 플랫폼팀이 바로 옆에 있어서 관련된 지식을 배우기 좋은 환경인 것 같아요. 서비스 이슈가 나왔을 때 DevOps 업무로는 접하기 어려운 이슈도 옆에서 보이게 되는 환경이니 많은 정보를 얻을 수 있습니다.


준영: 토스의 DevOps 팀은 각자 업무의 영역이 정해져 있는 것이 아니라, 모든 구성원이 전반적인 인프라 구성에 대해서 높은 수준의 이해도를 가지고 있어요.

덕분에 누군가 업무를 할당해 주는 방식이 아니라, 개발자 분들의 요청을 받으면서 어떤 분야든 각자의 판단으로 개선 포인트가 되는 작업들을 공유하고 진행합니다. 진행했던 작업들은 격주로 모든 계열사의 DevOps 엔지니어와 함께 진행되는 챕터 미팅으로 싱크하고 있는데요. 자율적인 업무 방식이 큰 동기부여와 즐겁게 일할 수 있는 원동력이 되고 있어요.

Q. 토스에서 꼭 이뤄내고 싶은 일이 무엇인가요?


재성: 현재까지는 토스의 성장속도가 빨라서 뒤따라기에 바빴어요. 어느 정도 성장과 성숙을 이뤄내서 제품적으로 사이트 안정성/신뢰성(Site Reliability)이나 업무 생산성을 커버하는 소프트웨어들을 고도화하고 싶어요. 업무 경험이나 생산성과 같은 지표들도 가시화하고, 지속적으로 더 개선하는 DevOps 팀이 되었으면 좋겠어요.

경수: 운영에서 사람이 개입하지 않아도 될 정도로 완전 자동화를 해두고 싶어요.

물리적인 작업이 아닌 이상 사람이 개입하지  않아도 될 정도로 자동화를 할 수 있다고 생각하는데, 끝이 없겠지만 사람이 개입하지 않아도 될 정도로 자동화를 하는 게 목표입니다.

준영: 지금도 잘하고 있지만, DevOps 문화와 역량에 대해 이야기할 때, 토스팀이 업계의 표준이 될 만큼의 고도화를 이루어 내고 싶습니다.

나아가 서비스 안정성이나 엔지니어링 업무 경험 향상 과정에서 나타날 수 있는 문제에 대한 해결방안을 글로벌에서 가장 먼저 고민하는 팀이 되는데 큰 역할을 해보고 싶어요.


Q. 앞으로 토스에 지원할 분들께 하고 싶은 이야기가 있다면?


재성: 업무 영역이 넓어서 회사에 다방면으로 기여할 부분들이 꽤 많아요. 지금도 꾸준히 트래픽이 증가하고 있어서 앞으로 새로운 문제들을 경험할 예정인데, 성장 욕심이 많고 호기심이 많은 분이 오시면 즐겁게 업무 하실 수 있을 거예요.

경수: 토스에서는 목표를 위해 함께 달려가고 있기 때문에 토스가 사용하는 대부분은 오픈소스로 되어 있어요. 내부 어드민 서비스도 직접 개발하고 있고요. 이슈가 있을 때 직접 고쳐 써야 하는 경우가 많아서 개발을 좋아하시는 분이 함께하면 좋겠습니다.

준영: 저희 팀은 토스 전반적인 인프라에 걸쳐 굉장히 광범위한 영역에 대해 트러블 슈팅과 개선을 진행하고 있어요. 덕분에 경험할 수 있는 것들도 많고, 배울 수 있는 것들도 많아서 새로운 기술에 대해 알아보고 깊이 있게 파보는 것을 좋아하는 분이라면 정말 즐겁게 업무를 할 수 있는 환경입니다.

짧으면 며칠, 길게는 몇 주간 풀리지 않던 문제를 해결해 낼 때의 짜릿함, 끊임없이 개선하고 공유하기를 좋아하는 분이라면 꼭 지원해보세요. 