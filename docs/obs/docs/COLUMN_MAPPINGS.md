# 그라파나 컬럼명 한글 매핑 가이드

**목적**: 비기술 이해관계자를 위한 영문 컬럼명과 한글 번역 매핑  
**대상**: 기획팀, 마케팅팀, 비즈니스 분석가  
**업데이트**: 2025-11-05

---

## 📊 핵심 개념

### 사용자 vs 세션

- **사용자 (User)**: 고유한 개인 (`attributes.userKey` 기준)
- **세션 (Session)**: 앱/웹 방문 단위 (`attributes.sessionId` 기준)
- 한 사용자가 하루에 여러 세션을 생성할 수 있습니다

### 기준일 vs 재방문

- **기준일**: 특정 날짜에 방문한 사용자 집단 (코호트)
- **재방문**: 기준일 이후 다시 서비스를 방문하는 행동

---

## 1. MAU (Monthly Active Users) 지표

### 테이블: `theshop_brand_mau_summary`

| 영문 컬럼명            | 한글 번역               | 계산식                    | 설명                                   |
| ---------------------- | ----------------------- | ------------------------- | -------------------------------------- |
| `service_name`         | 서비스명                | -                         | 'theshop-brand', 'theshop-pharmacy' 등 |
| `year_month`           | 년월                    | -                         | 'YYYY-MM' 형식                         |
| `monthly_active_users` | **월간 활성 사용자 수** | COUNT(DISTINCT userKey)   | 해당 월에 1회 이상 방문한 고유 사용자  |
| `total_sessions`       | 총 세션 수              | COUNT(DISTINCT sessionId) | 해당 월의 총 세션 수                   |
| `total_events`         | 총 이벤트 수            | COUNT(\*)                 | 해당 월의 총 이벤트 발생 수            |
| `execution_date`       | 실행일                  | -                         | 쿼리 실행 날짜 (내부 사용)             |

**비즈니스 활용**:

- 서비스 전체 규모 파악
- 월별 성장률 추적: `(이번 달 MAU - 지난 달 MAU) / 지난 달 MAU × 100`
- 마케팅 캠페인 효과 측정

**예시**:

```
2025년 10월 MAU = 15,234명
- 같은 사람이 10월에 100번 방문해도 1명으로 계산
- 신규 가입자 + 재방문자 포함
```

---

## 2. DAU (Daily Active Users) 지표

### 테이블: `theshop_brand_dau_summary`

| 영문 컬럼명          | 한글 번역                   | 계산식                               | 설명                                    |
| -------------------- | --------------------------- | ------------------------------------ | --------------------------------------- |
| `date`               | 날짜                        | -                                    | YYYY-MM-DD                              |
| `daily_active_users` | **일일 활성 사용자 수**     | COUNT(DISTINCT userKey)              | 해당 날짜에 1회 이상 방문한 고유 사용자 |
| `daily_sessions`     | 일일 세션 수                | COUNT(DISTINCT sessionId)            | 해당 날짜의 총 세션 수                  |
| `daily_events`       | 일일 이벤트 수              | COUNT(\*)                            | 해당 날짜의 총 이벤트 수                |
| `events_per_user`    | **사용자당 평균 이벤트 수** | 일일 이벤트 수 ÷ 일일 활성 사용자 수 | 사용자 참여도 지표                      |

**비즈니스 활용**:

- 요일별 패턴 분석 (예: 주말 트래픽 증가)
- 특정 프로모션의 즉각적 효과 측정
- DAU/MAU 비율로 사용자 활성도 측정 (Stickiness)

**예시**:

```
11월 4일 (월요일) DAU = 523명
11월 5일 (토요일) DAU = 784명 (+50%)
→ 주말에 사용자가 집중되는 패턴 확인
```

---

## 3. Retention (재방문율) 지표

### 테이블: `theshop_brand_retention_summary`

| 영문 컬럼명        | 한글 번역            | 계산식                                      | 설명                         |
| ------------------ | -------------------- | ------------------------------------------- | ---------------------------- |
| `retention_type`   | 리텐션 유형          | -                                           | 'D+1', 'D+7', 'D+30'         |
| `base_users`       | **기준일 방문자 수** | 기준일의 COUNT(DISTINCT userKey)            | 코호트 크기 (비교 대상 모수) |
| `retained_users`   | **재방문 사용자 수** | 재방문일의 COUNT(DISTINCT userKey)          | 다시 방문한 사용자 수        |
| `retention_rate`   | **재방문율(%)**      | (재방문 사용자 수 ÷ 기준일 방문자 수) × 100 | 리텐션 비율                  |
| `calculation_date` | 기준일               | -                                           | 코호트 기준 날짜             |

**재방문 기간 정의**:
| 유형 | 기준일 | 재방문일 | 의미 |
| -------- | ------------- | ------------ | ---------------------------- |
| **D+1** | 실행일 - 2일 | 실행일 - 1일 | 다음날 재방문 (단기 충성도) |
| **D+7** | 실행일 - 8일 | 실행일 - 1일 | 7일 후 재방문 (중기 충성도) |
| **D+30** | 실행일 - 31일 | 실행일 - 1일 | 30일 후 재방문 (장기 충성도) |

**비즈니스 활용**:

- 사용자 충성도 측정
- 신규 가입자 정착률 추적
- 서비스 만족도 간접 지표

**건강한 리텐션 기준**:

```
D+1: 30-40% 이상 → 우수
D+7: 15-25% 이상 → 양호
D+30: 5-10% 이상 → 정상
```

**예시**:

```
11월 3일 실행 시 D+1 리텐션:
- 기준일: 11월 1일 (실행일 - 2일)
- 재방문일: 11월 2일 (실행일 - 1일)
- 기준일 방문자: 1,000명
- 재방문 사용자: 350명
- D+1 재방문율: (350 / 1,000) × 100 = 35% ✅
```

---

## 4. Conversion (전환율) 지표

### 테이블: `theshop_brand_conversion_summary`

| 영문 컬럼명               | 한글 번역                   | 계산식                                            | 설명                                       |
| ------------------------- | --------------------------- | ------------------------------------------------- | ------------------------------------------ |
| `calculation_date`        | 계산일                      | -                                                 | 분석 대상 날짜                             |
| `total_sessions`          | **총 세션 수**              | session.start 이벤트 세션 수                      | 전체 방문 세션                             |
| `product_view_sessions`   | **상품 조회 세션 수**       | product.view 이벤트 세션 수                       | 상품을 본 세션                             |
| `cart_add_sessions`       | **장바구니 담기 세션 수**   | cart.add 이벤트 세션 수                           | 장바구니에 추가한 세션                     |
| `total_users`             | 총 사용자 수                | session.start 이벤트 사용자 수                    | 전체 방문 사용자                           |
| `purchasing_users`        | **장바구니 담은 사용자 수** | cart.add 이벤트 사용자 수                         | 장바구니 추가한 사용자 (⚠️ 구매 완료 아님) |
| `product_view_rate`       | 상품 조회율(%)              | (상품 조회 세션 수 ÷ 총 세션 수) × 100            | 1단계 퍼널 전환                            |
| `cart_conversion_rate`    | 장바구니 전환율(%)          | (장바구니 담기 세션 수 ÷ 상품 조회 세션 수) × 100 | 2단계 퍼널 전환                            |
| `overall_conversion_rate` | **세션 전환율(%)**          | (장바구니 담기 세션 수 ÷ 총 세션 수) × 100        | **전체 퍼널 효율** (세션 기준)             |
| `user_conversion_rate`    | 사용자 전환율(%)            | (장바구니 담은 사용자 수 ÷ 총 사용자 수) × 100    | 전체 퍼널 효율 (사용자 기준)               |

**주의사항**:

- `purchasing_users`는 "구매 완료"가 아닌 "장바구니 담기"를 측정합니다
- `overall_conversion_rate` (세션 전환율)과 `user_conversion_rate` (사용자 전환율)은 다른 지표입니다

**구매 퍼널 (세션 기준)**:

```
1. 세션 시작        총 세션 수 (100%)
   ↓ 상품 조회율
2. 상품 조회        상품 조회 세션 수 (60-80%)
   ↓ 장바구니 전환율
3. 장바구니 담기    장바구니 담기 세션 수 (5-10%)
```

**비즈니스 활용**:

- 구매 퍼널 단계별 이탈률 파악
- UI/UX 개선 포인트 식별
- A/B 테스트 효과 측정

**예시**:

```
11월 4일 전환 지표:
- 총 세션 수: 1,500
- 상품 조회 세션 수: 1,200 (상품 조회율 80%)
- 장바구니 담기 세션 수: 90 (장바구니 전환율 7.5%)
- 세션 전환율: (90 / 1,500) × 100 = 6% ✅

해석:
→ 상품 조회율 80%는 우수 (사용자가 콘텐츠에 관심 있음)
→ 세션 전환율 6%는 양호 (이커머스 평균 3-8%)
→ 개선 포인트: 상품 조회 후 장바구니 담기 전환율 향상 (7.5% → 10% 목표)
```

---

## 5. User Cohort (사용자 그룹) 지표

### 테이블: `theshop_brand_user_cohort_summary`

| 영문 컬럼명        | 한글 번역   | 정의                    | 설명                  |
| ------------------ | ----------- | ----------------------- | --------------------- |
| `cohort_type`      | 사용자 그룹 | -                       | 최초 방문일 기준 분류 |
| `user_count`       | 사용자 수   | COUNT(DISTINCT userKey) | 해당 그룹의 사용자 수 |
| `calculation_date` | 계산일      | -                       | 분석 기준 날짜        |

**사용자 그룹 정의**:
| 영문 | 한글 | 최초 방문일 | 특성 |
| --------------- | -------------- | ------------- | ----------------- |
| New (0-7d) | 신규 (0-7일) | 최근 7일 이내 | 신규 가입/첫 방문 |
| Recent (8-30d) | 최근 (8-30일) | 8-30일 전 | 온보딩 단계 |
| Active (31-90d) | 활성 (31-90일) | 31-90일 전 | 정착 단계 |
| Veteran (90d+) | 베테랑 (90일+) | 90일 이전 | 충성 고객 |

**비즈니스 활용**:

- 사용자 라이프사이클 분석
- 코호트별 맞춤 마케팅 전략
- 이탈 위험 그룹 식별

**예시**:

```
11월 5일 사용자 분포:
- 신규 (0-7일): 850명 (15%)
- 최근 (8-30일): 1,200명 (21%)
- 활성 (31-90일): 2,100명 (37%)
- 베테랑 (90일+): 1,500명 (27%)

해석:
→ 신규 유입 건강함 (15%)
→ 베테랑 비율 높음 (27%) → 충성도 우수
```

---

## 6. Session Metrics (세션 지표)

### 테이블: `theshop_brand_session_metrics_summary`

| 영문 컬럼명                   | 한글 번역                  | 계산식                         | 설명                |
| ----------------------------- | -------------------------- | ------------------------------ | ------------------- |
| `total_sessions`              | 총 세션 수                 | COUNT(DISTINCT sessionId)      | 분석 대상 세션 수   |
| `avg_events_per_session`      | **세션당 평균 이벤트 수**  | AVG(이벤트 수 per 세션)        | 세션 참여도         |
| `avg_event_types_per_session` | 세션당 평균 이벤트 유형 수 | AVG(고유 이벤트 타입 per 세션) | 기능 사용 다양성    |
| `max_events_per_session`      | 최대 이벤트 수             | MAX(이벤트 수 per 세션)        | 가장 활발한 세션    |
| `median_events_per_session`   | 중앙값 이벤트 수           | PERCENTILE(0.5)                | 일반적인 세션 활동  |
| `p90_events_per_session`      | **상위 10% 이벤트 수**     | PERCENTILE(0.9)                | 파워 유저 활동 수준 |

**비즈니스 활용**:

- 세션 품질 평가
- 파워 유저 vs 일반 유저 비교
- 세션 참여도 트렌드 모니터링

**예시**:

```
11월 4일 세션 지표:
- 세션당 평균 이벤트: 12.5개
- 중앙값 이벤트: 8개
- 상위 10% 이벤트: 35개

해석:
→ 일반 사용자: 8개 이벤트 (중앙값)
→ 파워 유저: 35개 이벤트 (상위 10%)
→ 평균 12.5개는 소수의 파워 유저가 올린 수치
```

---

## 7. Event Distribution (이벤트 분포) 지표

### 테이블: `theshop_brand_event_distribution_summary`

| 영문 컬럼명           | 한글 번역            | 계산식                           | 설명                          |
| --------------------- | -------------------- | -------------------------------- | ----------------------------- |
| `event_type`          | 이벤트 유형          | -                                | 예: 'commerce.cart.add'       |
| `event_count`         | **이벤트 발생 횟수** | COUNT(\*)                        | 해당 이벤트 총 발생 수        |
| `unique_users`        | 고유 사용자 수       | COUNT(DISTINCT userKey)          | 이벤트를 발생시킨 고유 사용자 |
| `unique_sessions`     | 고유 세션 수         | COUNT(DISTINCT sessionId)        | 이벤트가 발생한 고유 세션     |
| `percentage_of_total` | 전체 비율(%)         | (이벤트 수 ÷ 총 이벤트 수) × 100 | 전체 이벤트 중 비중           |

**비즈니스 활용**:

- 주요 기능 사용 빈도 파악
- 이상 패턴 탐지 (특정 이벤트 급증/급감)
- 기능 사용률 우선순위 결정

**주요 이벤트 유형**:

- `commerce.session.start`: 세션 시작
- `commerce.product.view`: 상품 조회
- `commerce.cart.add`: 장바구니 담기
- `commerce.search`: 검색
- `commerce.button.click`: 버튼 클릭

---

## 8. Brand Extraction Queries (브랜드 데이터 추출)

**파일**: `dashboards/commerce/data-extraction-queries-2025-10-18-to-brand.sql`  
**대상**: theshop-brand 서비스 (대웅, 알피스페이스 브랜드)  
**목적**: Athena에서 직접 실행하여 브랜드별 지표를 CSV로 추출

### Query 1: Weekly UV (주간 UV)

| 영문 컬럼명       | 한글 번역            | 정의                                 |
| ----------------- | -------------------- | ------------------------------------ |
| `week_start_date` | **주 시작 날짜**     | 주의 월요일 날짜                     |
| `week_end_date`   | **주 종료 날짜**     | 주의 일요일 날짜                     |
| `brand_name`      | **브랜드명**         | '대웅' 또는 '알피스페이스'           |
| `weekly_uv`       | **주간 고유 방문자** | 해당 주에 방문한 고유 사용자 수 (UV) |
| `days_in_period`  | 집계 기간 내 일수    | 해당 주에 데이터가 있는 일수         |

**비즈니스 활용**: 브랜드별 주간 트래픽 추이 비교, 브랜드관 성장 모니터링

---

### Query 2: Daily Cart Add (일일 장바구니 담기)

| 영문 컬럼명       | 한글 번역                 | 정의                               |
| ----------------- | ------------------------- | ---------------------------------- |
| `date`            | **날짜**                  | 집계 날짜 (YYYY-MM-DD)             |
| `cart_add_count`  | **장바구니 담기 클릭 수** | commerce.cart.add 이벤트 발생 횟수 |
| `unique_users`    | 고유 사용자 수            | 장바구니 담기를 한 고유 사용자     |
| `unique_sessions` | 고유 세션 수              | 장바구니 담기가 발생한 고유 세션   |

**비즈니스 활용**: 브랜드관 장바구니 담기 일별 추이, 프로모션 효과 측정

---

### Query 3: Daily DAU (일일 DAU)

| 영문 컬럼명             | 한글 번역                 | 정의                           |
| ----------------------- | ------------------------- | ------------------------------ |
| `date`                  | **날짜**                  | 집계 날짜 (YYYY-MM-DD)         |
| `brand_name`            | **브랜드명**              | '대웅' 또는 '알피스페이스'     |
| `dau`                   | **일일 활성 사용자 수**   | 해당 브랜드관 방문 고유 사용자 |
| `session_count`         | 세션 수                   | 해당 브랜드관 세션 수          |
| `avg_sessions_per_user` | **사용자당 평균 세션 수** | 세션 수 ÷ 사용자 수            |

**비즈니스 활용**: 브랜드별 일일 활성 사용자 비교, 사용자 참여도 측정

---

### Query 4-1: Retention (Unique) - 리텐션율 (유니크)

**정의**: 최초 방문일 기준, 고유 사용자만 계산 (중복 제거)

| 영문 컬럼명             | 한글 번역                | 계산식                                        |
| ----------------------- | ------------------------ | --------------------------------------------- |
| `cohort_date`           | **첫 방문일**            | 해당 브랜드에 최초로 방문한 날짜              |
| `brand_name`            | **브랜드명**             | '대웅' 또는 '알피스페이스'                    |
| `cohort_size`           | **첫 방문 사용자 수**    | 해당 날짜에 최초 방문한 고유 사용자 수        |
| `d1_retained_users`     | **D+1 재방문 사용자 수** | 기준일 다음날 재방문한 사용자 수              |
| `d3_retained_users`     | **D+3 재방문 사용자 수** | 기준일 3일 후 재방문한 사용자 수              |
| `d7_retained_users`     | **D+7 재방문 사용자 수** | 기준일 7일 후 재방문한 사용자 수              |
| `d1_retention_rate_pct` | **D+1 재방문율(%)**      | (D+1 재방문 사용자 ÷ 첫 방문 사용자 수) × 100 |
| `d3_retention_rate_pct` | **D+3 재방문율(%)**      | (D+3 재방문 사용자 ÷ 첫 방문 사용자 수) × 100 |
| `d7_retention_rate_pct` | **D+7 재방문율(%)**      | (D+7 재방문 사용자 ÷ 첫 방문 사용자 수) × 100 |

**비즈니스 활용**: 브랜드별 단기/중기 충성도 비교, 신규 유입 사용자 정착률

---

### Query 4-2: Retention (All) - 리텐션율 (전체)

**정의**: 모든 방문 포함, 중복 방문도 계산 (중복 포함)

| 영문 컬럼명               | 한글 번역                  | 계산식                                     |
| ------------------------- | -------------------------- | ------------------------------------------ |
| `cohort_date`             | **방문일**                 | 사용자가 해당 브랜드를 방문한 날짜         |
| `brand_name`              | **브랜드명**               | '대웅' 또는 '알피스페이스'                 |
| `total_visits`            | **총 방문 횟수**           | 기준일의 총 방문 횟수 (중복 포함)          |
| `unique_users`            | 고유 사용자 수             | 기준일에 방문한 고유 사용자 수             |
| `d1_returned_users`       | **D+1 재방문한 사용자 수** | 다음날 재방문한 사용자 수                  |
| `d3_returned_users`       | **D+3 재방문한 사용자 수** | 3일 후 재방문한 사용자 수                  |
| `d7_returned_users`       | **D+7 재방문한 사용자 수** | 7일 후 재방문한 사용자 수                  |
| `d1_total_return_visits`  | **D+1 총 재방문 횟수**     | 다음날 총 재방문 횟수 (중복 포함)          |
| `d3_total_return_visits`  | **D+3 총 재방문 횟수**     | 3일 후 총 재방문 횟수 (중복 포함)          |
| `d7_total_return_visits`  | **D+7 총 재방문 횟수**     | 7일 후 총 재방문 횟수 (중복 포함)          |
| `d1_user_return_rate_pct` | **D+1 사용자 재방문율(%)** | (D+1 재방문 사용자 ÷ 고유 사용자 수) × 100 |
| `d3_user_return_rate_pct` | **D+3 사용자 재방문율(%)** | (D+3 재방문 사용자 ÷ 고유 사용자 수) × 100 |
| `d7_user_return_rate_pct` | **D+7 사용자 재방문율(%)** | (D+7 재방문 사용자 ÷ 고유 사용자 수) × 100 |

**비즈니스 활용**: 파워 유저 재방문 패턴 분석, 브랜드별 충성도 심층 분석

**Query 4-1 vs 4-2 차이점**:

- **Query 4-1**: 최초 방문일만 집계, 한 사용자 = 한 번만 계산 (순수 리텐션)
- **Query 4-2**: 모든 방문일 집계, 한 사용자 = 방문할 때마다 계산 (중복 방문 패턴 분석)

---

## 📝 용어 정리

### 자주 혼동되는 용어

| 용어                   | 설명                             | 예시                                 |
| ---------------------- | -------------------------------- | ------------------------------------ |
| **사용자 (User)**      | 고유한 개인 (userKey 기준)       | 김철수 1명                           |
| **세션 (Session)**     | 앱/웹 방문 단위 (sessionId 기준) | 김철수가 오전, 오후 2번 방문 = 2세션 |
| **이벤트 (Event)**     | 사용자 행동 단위                 | 장바구니 담기, 검색, 클릭 등         |
| **기준일 (Base Date)** | 코호트 시작 날짜                 | 11월 1일 방문자 그룹                 |
| **재방문 (Retained)**  | 기준일 이후 다시 방문            | 11월 1일 방문자가 11월 2일에도 방문  |
| **전환 (Conversion)**  | 목표 행동 완료                   | 세션 시작 → 장바구니 담기            |
| **코호트 (Cohort)**    | 특정 기준으로 묶은 사용자 그룹   | 11월 1일 방문자 1,000명              |

### 세션 기준 vs 사용자 기준

**세션 기준 (Session-based)**:

- 한 사용자의 여러 세션을 별도로 계산
- 예: 김철수가 오전/오후 2번 방문 → 2세션
- 사용처: 전환율, 세션 메트릭

**사용자 기준 (User-based)**:

- 한 사용자는 여러 번 방문해도 1명
- 예: 김철수가 오전/오후 2번 방문 → 1사용자
- 사용처: MAU, DAU, 리텐션

---

## 🔍 그라파나에서 컬럼명 확인하는 방법

1. **테이블 패널**: 컬럼 헤더에 한글 번역이 표시됩니다
2. **컬럼 설명 보기**: 헤더에 마우스 오버하면 툴팁으로 계산식 표시
3. **패널 설명 보기**: 패널 제목 옆 (i) 아이콘 클릭

---

## 📞 문의

컬럼 정의나 계산식 관련 문의:

- 데이터 플랫폼 팀
- Slack: #data-platform

---

## 📚 관련 문서

- [Athena Query Builder 가이드](../docs/athena-query-builder-guide.md)
- [Step Functions 가이드](../docs/step-functions-guide.md)
- [비기술자를 위한 지표 가이드](../docs/metrics-guide-for-non-technical.md)
- [이해관계자 지표 명세서](../docs/metrics-specification-for-stakeholders.md)
